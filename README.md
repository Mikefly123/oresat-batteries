# OreSat Battery Board V2.0## The Jeremey Clarkson Methodology to Power Management (MORE POWAAHH)The OreSat Power Domain (OPD) is designed with modularity as a key factor in design decisions.  We are confident that our system will behave spectacularly in flight (whether that is spectacularly well or spectacularly bad remains to be seen).## Battery Pack TopologyEach OreSat battery card has 2 battery packs, each pack consisting of 2S 18650 LiPo cells.  We will be flying two battery cards connected to the OPD, both to keep our center of mass balanced around our geometric center, and for the added capacity.  Despite this, each card is independent and the OPD is fully capable of functioning with only one active card.We decided to separate the packs instead of combining them into a single 2S2P pack for the sake of redundancy, we can lose one cell and the other pack can still provide power to the OPD, as opposed to losing an entire card from a single cell failure.  This design does come with the added drawbacks of extra overhead in the form of requiring more charge protection and fuel gauge circuitry.  ## Charge/Discharge ProtectionWe are using Ablic S8209 to monitor our cell voltage levels and disable charging if the cell voltage goes above the predetermined overcharging threshold or disable discharging if the cell voltage goes below a predetermined discharging threshold.  The S8209 has two inputs that, if activated, will trigger the either the over-charge or under-charge protection to activate.  This allows us to daisy chain these chips together, so that each cell has its own charge protection IC.  It also allows us to connect them to a GPIO on an onboard microcontroller so that we can manually disable charging or discharging functionality if needed.  Below is a state diagram that depicts the desired behavior of our charging and discharging protection circuit![Battery Disable State Diagram](https://github.com/oresat/oresat-batteries/blob/master/docs/OreSat%20Battery%20State%20Diagram.png)The output of the S8209 uses an internal N-channel MOSFET, which has the potential to latch from radiation exposure.   To combat this, we have P-channel MOSFETS in series with the VDD of each S8209, the gate of the MOSFET is connected to our onboard microcontroller, so that we can periodically power cycle the S8209 and clear the N-channel latch.  ## Fuel Gauge and Cell Health MonitoringEach 2S1P battery back will have two MAX17205 fuel gauges to monitor the packs current state of charge, and the long term health of the battery.  Each MAX17205 will be reporting both the direct State of charge (in mAh) and the percentage over I2C to our M0, compensating for factors such as cell degradation and temperature ranges.  We are still testing the accuracy of the MAX17205's compensation algorithm's for extreme charge levels and temperature in our lab.  At this point we don't know how much we should be relying on these compensation algorithms, they could be amazing! Or horrible! We don't know! Yay science!  Each fuel gauge is also monitoring the battery temperatures with a single internal sensor and two external thermistors (we are still determining the best position for these thermistors).  This gives us a wackton of data which is good because we are data hoarders.  